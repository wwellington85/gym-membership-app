@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Design Tokens ---------- */
:root {
  --bg: 255 255 255;
  --fg: 10 10 10;
  --muted: 120 120 120;
  --card: 255 255 255;
  --border: 228 228 231;
  --ring: 59 130 246;

  --accent-1: 99 102 241;   /* indigo */
  --accent-2: 16 185 129;   /* emerald */
  --accent-3: 236 72 153;   /* pink */
}

.dark {
  --bg: 8 8 10;
  --fg: 244 244 245;
  --muted: 161 161 170;
  --card: 12 12 16;
  --border: 39 39 42;
  --ring: 99 102 241;
}

html, body { height: 100%; }
body {
  background: rgb(var(--bg));
  color: rgb(var(--fg));
}

/* ---------- Aurora Background ---------- */
.oura-bg {
  position: relative;
  overflow-x: hidden;
  overflow-y: visible;
  background: rgb(var(--bg));
}
.oura-bg > * { position: relative; z-index: 1; }

.oura-bg::before,
.oura-bg::after {
  content: "";
  position: absolute;
  inset: -40%;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(closest-side, rgb(var(--accent-1) / 0.22), transparent 65%),
    radial-gradient(closest-side, rgb(var(--accent-2) / 0.16), transparent 60%),
    radial-gradient(closest-side, rgb(var(--accent-3) / 0.12), transparent 62%);
  filter: blur(48px);
}
.oura-bg::before { transform: translate(-10%, -10%); }
.oura-bg::after  { transform: translate(10%, 10%); opacity: 0.85; }

/* ---------- Outer App Shell ---------- */
.oura-shell{
  position: relative;
  overflow: hidden;
  border-radius: 32px;

  /* outer frame: subtle glass, not a hard rectangle */
  background: rgba(10,10,14,0.16);
  border: 1px solid rgba(255,255,255,0.08);

  box-shadow:
    0 24px 90px rgba(0,0,0,0.65),
    inset 0 1px 0 rgba(255,255,255,0.08);

  backdrop-filter: blur(26px) saturate(140%);
  -webkit-backdrop-filter: blur(26px) saturate(140%);
}

/* ---------- True Dark Glass Card ---------- */
.oura-card{
  position: relative;
  overflow: hidden;
  border-radius: 28px;

  /* inner cards: dark glass (less gray) */
  background:
    linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.003)),
    rgba(0,0,0,0.34);

  border: 1px solid rgba(255,255,255,0.08);

  box-shadow:
    0 18px 70px rgba(0,0,0,0.60),
    inset 0 1px 0 rgba(255,255,255,0.012);

  backdrop-filter: blur(28px) saturate(170%);
  -webkit-backdrop-filter: blur(28px) saturate(170%);
}

/* specular highlight (no texture/noise) */
.oura-card::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;

  /* specular highlight only (no texture/noise) */
  background:
    radial-gradient(900px 320px at 18% 0%,
      rgba(255,255,255,0.09),
      transparent 62%
    ),
    radial-gradient(700px 260px at 85% 12%,
      rgba(255,255,255,0.035),
      transparent 66%
    );
  opacity: 0.95;
}

/* rim light stroke */
.oura-card::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;

  /* subtle rim light (single stroke) */
  padding: 1px;
  background: linear-gradient(
    180deg,
    rgba(255,255,255,0.14),
    rgba(255,255,255,0.02)
  );

  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  mask-composite: exclude;

  opacity: 0.20;
}

/* ---------- Bottom Tab Bar ---------- */
.oura-tabbar{
  background: rgba(10, 10, 14, 0.30);
  border-top: 1px solid rgba(255,255,255,0.14);
  backdrop-filter: blur(22px) saturate(140%);
  -webkit-backdrop-filter: blur(22px) saturate(140%);
  box-shadow: 0 -10px 40px rgba(0,0,0,0.45);
}
.oura-tab { color: rgba(210,210,215,0.70); }
.oura-tab-active{
  color: rgb(var(--fg));
  text-shadow: 0 0 18px rgb(var(--accent-1) / 0.22);
}

/* Focus + dark hover fix */
:focus-visible { outline: 2px solid rgb(var(--ring) / 0.45); outline-offset: 2px; }
html.dark .hover\:bg-gray-50:hover { background: rgba(255,255,255,0.08) !important; }

/* Inner surfaces used inside cards (inputs/sections) */
.oura-surface{
  background: rgba(0,0,0,0.20);
  border: 1px solid rgba(255,255,255,0.035);
  border-radius: 18px;
  backdrop-filter: blur(18px) saturate(150%);
  -webkit-backdrop-filter: blur(18px) saturate(150%);
}

/* ============================
   AURORA RESTORE + GLASS TUNE
   (final overrides)
   ============================ */

/* Ensure page stays dark-purple, not flat black */
html.dark .oura-bg{
  background: rgb(var(--bg)) !important;
}

/* Outer shell: darker frame, but still transparent so aurora shows */
html.dark .oura-shell{
  position: relative;


  border-radius: 32px !important;

  /* key: TRANSPARENT dark, not opaque black */
  background: rgba(10,10,14,0.48) !important;

  border: 1px solid rgba(255,255,255,0.08) !important;

  box-shadow:
    0 28px 110px rgba(0,0,0,0.44),
    inset 0 1px 0 rgba(255,255,255,0.05) !important;

  backdrop-filter: blur(28px) saturate(150%) !important;
  -webkit-backdrop-filter: blur(28px) saturate(150%) !important;
}

/* Cards: darker glass, but translucent (kills the gray paint look) */
/* ============================
   WET GLASS (TINTED) – v2
   append-only override
   ============================ */

/* Keep the aurora (avoid flat black) */
html.dark .oura-bg{
  background:
    radial-gradient(1200px 700px at 20% 0%, rgba(99,102,241,0.16), transparent 58%),
    radial-gradient(900px 600px at 80% 20%, rgba(16,185,129,0.08), transparent 62%),
    radial-gradient(1100px 900px at 50% 120%, rgba(236,72,153,0.06), transparent 55%),
    rgb(6 6 10) !important;
}

/* Outer shell: darker frame but still translucent */
html.dark .oura-shell{
  background: rgba(10,10,14,0.20) !important;
  border: 1px solid rgba(255,255,255,0.09) !important;
  box-shadow:
    0 28px 110px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.06) !important;
  backdrop-filter: blur(30px) saturate(160%) !important;
  -webkit-backdrop-filter: blur(30px) saturate(160%) !important;
}

/* Cards: tinted glass (less gray, more premium) */
/* ============================
   FINAL AURORA BOOST (INDIGO)
   ============================ */
html.dark .oura-bg::before,
html.dark .oura-bg::after{
  background:
    radial-gradient(closest-side, rgb(var(--accent-1) / 0.34), transparent 66%),
    radial-gradient(closest-side, rgb(var(--accent-2) / 0.18), transparent 60%),
    radial-gradient(closest-side, rgb(var(--accent-3) / 0.16), transparent 62%) !important;
  filter: blur(54px) saturate(140%) !important;
  opacity: 0.95 !important;
}


/* ============================
   BACKGROUND RESTORE (deep indigo base)
   Keeps aurora, but returns the darker indigo look
   ============================ */
html.dark .oura-bg{
  /* deep indigo -> near-black base + subtle vignette */
  background:
    radial-gradient(1200px 900px at 20% 0%, rgba(99,102,241,0.16), transparent 60%),
    radial-gradient(900px 700px at 85% 10%, rgba(236,72,153,0.06), transparent 65%),
    radial-gradient(1000px 800px at 60% 120%, rgba(16,185,129,0.06), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0.62), rgba(0,0,0,0.86)),
    rgb(5 6 14) !important;
}

/* dial back the aurora blobs so the base reads darker indigo */
html.dark .oura-bg::before{ opacity: 0.55 !important; }
html.dark .oura-bg::after{  opacity: 0.45 !important; }


/* ============================
   CARD TINT: indigo dark glass
   ============================ */
html.dark .oura-card{
  /* dark glass base + subtle indigo tint layer */
  background:
    radial-gradient(900px 420px at 20% 0%, rgba(99,102,241,0.12), transparent 60%),
    linear-gradient(180deg,
      rgba(255,255,255,0.05) 0%,
      rgba(255,255,255,0.015) 45%,
      rgba(255,255,255,0.00) 100%
    ),
    rgba(0,0,0,0.42) !important;

  border: 1px solid rgba(255,255,255,0.075) !important;

  box-shadow:
    0 22px 90px rgba(0,0,0,0.60),
    inset 0 1px 0 rgba(255,255,255,0.05),
    inset 0 0 0 1px rgba(99,102,241,0.05) !important;

  backdrop-filter: blur(28px) saturate(175%) !important;
  -webkit-backdrop-filter: blur(28px) saturate(175%) !important;
}

/* wet shine (keep it) */
html.dark .oura-card::before{
  background:
    radial-gradient(520px 160px at 22% 0%, rgba(255,255,255,0.24), transparent 56%),
    radial-gradient(420px 150px at 88% 10%, rgba(255,255,255,0.10), transparent 60%),
    radial-gradient(900px 520px at 60% 120%, rgba(99,102,241,0.08), transparent 60%) !important;

  opacity: 0.80 !important;
  mix-blend-mode: screen;
}

/* rim: slightly “cool” */
html.dark .oura-card::after{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.01)),
    linear-gradient(90deg, rgba(99,102,241,0.10), rgba(0,0,0,0)) !important;

  opacity: 0.32 !important;
}



/* Reserve space for fixed bottom tab bar */
.pb-tabbar {
  padding-bottom: calc(88px + env(safe-area-inset-bottom));
}

/* Subtle fade so content behind the glass nav is still readable */
.oura-tabbar::before {
  content: "";
  position: absolute;
  left: 0; right: 0;
  top: -24px;
  height: 24px;
  background: linear-gradient(to top, rgba(0,0,0,0.35), rgba(0,0,0,0));
  pointer-events: none;
}

/* =========================================
   FIX: keep bottom tabbars truly FIXED
   (avoid transformed containing blocks)
   ========================================= */
html, body {
  transform: none !important;
}

.oura-bg,
.oura-shell {
  transform: none !important;
}
/* ============================
   TABBAR: never override fixed
   ============================ */
.oura-tabbar {
}

/* =========================================
   FIXED POSITION SAFETY (desktop + mobile)
   ========================================= */
html, body, .oura-bg, .oura-shell {
  transform: none !important;
  filter: none !important;
  perspective: none !important;
  contain: none !important;
}

/* ============================
   Bottom tabbars must be FIXED
   (do NOT apply to StaffTopbar)
   ============================ */
.oura-bottom-tabbar {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
}

/* =========================================
   APP SCROLL LOCK
   - Prevent page scrolling outside the app frame
   - Scroll only inside #app-root
   ========================================= */
html, body {
  height: 100%;
  overflow: hidden;
  overscroll-behavior: none;
}

#app-root.app-root {
  height: 100svh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: calc(env(safe-area-inset-bottom) + 88px); /* space for bottom tabs */
}

/* =========================================
   HARD LOCK: prevent any document scrolling (Chrome)
   ========================================= */
html, body {
  height: 100%;
  overflow: hidden !important;
  margin: 0;
}

body {
  position: fixed;
  inset: 0;
  width: 100%;
}

/* Desktop: prevent scrolling outside the app viewport */
html, body {
  height: 100%;
  overflow: hidden;
}

#app-root {
  height: 100%;
  overflow-y: auto;
  overscroll-behavior: contain;
}

/* ---------- Oura Inputs ---------- */
.oura-input{
  /* Base: do NOT paint gray. Let dark override do the glass tint. */
  background: transparent !important;
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 12px;
  backdrop-filter: blur(14px) saturate(140%);
  -webkit-backdrop-filter: blur(14px) saturate(140%);
}

.oura-input::placeholder{ color: rgba(210,210,215,0.55); }

/* Chrome autofill (prevents gray/yellow fill on glass inputs) */
input.oura-input:-webkit-autofill,
textarea.oura-input:-webkit-autofill,
select.oura-input:-webkit-autofill{
  -webkit-text-fill-color: rgb(var(--fg)) !important;
  transition: background-color 9999s ease-in-out 0s;
  box-shadow: 0 0 0px 1000px rgba(10,10,14,0.42) inset !important;
  border: 1px solid rgba(255,255,255,0.10) !important;
}

/* =========================================
   OURA INPUT: force indigo wet-glass look
   (wins over shadcn tokens + utilities)
   ========================================= */
.dark input.oura-input,
.dark textarea.oura-input,
.dark select.oura-input
html.dark input.oura-input,
html.dark textarea.oura-input,
html.dark select.oura-input{
  background:
    radial-gradient(520px 180px at 22% 0%, rgb(var(--accent-1) / 0.26), transparent 62%),
    radial-gradient(420px 160px at 88% 10%, rgb(var(--accent-2) / 0.16), transparent 65%),
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.012)) !important;

  background-color: rgba(10,10,14,0.40) !important;

  border-color: rgba(255,255,255,0.10) !important;

  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    0 10px 30px rgba(0,0,0,0.42) !important;

  color: rgb(var(--fg)) !important;
}

.dark input.oura-input::placeholder,
.dark textarea.oura-input::placeholder
html.dark input.oura-input::placeholder,
html.dark textarea.oura-input::placeholder{
  color: rgba(210,210,215,0.55) !important;
}

/* Chrome autofill (prevents gray/yellow fill) */
.dark input.oura-input:-webkit-autofill,
.dark textarea.oura-input:-webkit-autofill,
.dark select.oura-input:-webkit-autofill
html.dark input.oura-input:-webkit-autofill,
html.dark textarea.oura-input:-webkit-autofill,
html.dark select.oura-input:-webkit-autofill{
  -webkit-text-fill-color: rgb(var(--fg)) !important;
  transition: background-color 9999s ease-in-out 0s;
  box-shadow: 0 0 0px 1000px rgba(10,10,14,0.42) inset !important;
  border-color: rgba(255,255,255,0.10) !important;
}

/* Placeholder color (Firefox + others) */
html.dark input.oura-input::placeholder,
html.dark textarea.oura-input::placeholder,
html.dark input.oura-input::-moz-placeholder,
html.dark textarea.oura-input::-moz-placeholder{
  color: rgba(210,210,215,0.55) !important;
}

/* Placeholder color (Firefox + others) */
html.dark input.oura-input::placeholder,
html.dark textarea.oura-input::placeholder,
html.dark input.oura-input::-moz-placeholder,
html.dark textarea.oura-input::-moz-placeholder{
  color: rgba(210,210,215,0.55) !important;
}
